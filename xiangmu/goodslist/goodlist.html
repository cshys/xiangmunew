<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>goodslist</title>
    <link rel="stylesheet" href="css/index.css">
</head>
<body>
    <div id="header">
        <div class="top">
            <div class="margin">
                <ul class="login">
                    <li class="collect"><a href="#">收藏视客眼镜网</a></li>
                    <li><span>|</span></li>
                    <li id="dl"><a href="register/login.html" target="_blank"><span>admin</span>登陆</a></li>
                    <li id="zx"><a class="logout">注销</a></li>
                    <li id="zc"><a href="register/register.html" target="_blank">注册</a></li>
                </ul>
                <ul class="user">
                    <li><a href="#">我的视客</a></li>
                    <li><a href="#">我的订单</a></li>
                    <li><a href="#">帮助中心</a></li>
                    <li><span>|</span></li>
                    <li>
                        <img src="img/maincart.png" alt="" > <a href="#">购物车</a>
                    </li>
                    <li id="mobile">
                        <img src="img/phone.png" alt="" > 
                        <a href="#">手机版
                            <img id="appimg" src="img/pic2wei.jpg" style="position: absolute; top: 26px; z-index: 1000; right: 198px; display: none;">
                        </a>
                    </li>
                    <li>
                        <img src="img/Customer.png" alt="" > 
                        <a href="#">在线客服</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="center">
            <a href="#"><img src="img/banner.jpg"></a>
        </div>
        <div class="bottom">
            <div class="margin">
                <div class="logo">
                    <a href="#"><img src="img/logo_new.jpg"></a>
                </div>
                <div class="search">
                    <div class="search-t">
                        <input type="text" placeholder="硅水凝胶" class="value">
                        <input type="button" value="搜索" class="s_button">
                    </div>
                    <div class="keywords">
                        <a href="#">清氧清</a>
                        <a href="#">博士伦</a>
                        <a href="#">强生舒日</a>
                        <a href="#">舒适氧</a>
                        <a href="#">美若康</a>
                        <a href="#">茵洛</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="nav">
        <div class="margin">
            <h3>所有商品分类</h3>
            <ul class="menu">
                <li><a href="#">首页</a></li>
                <li><a href="#">海淘<i>NEW</i></a></li>
                <li><a href="#">秒杀/今日值得买</a></li>
                <li><a href="#">隐形眼镜</a></li>
                <li><a href="#">硅水凝胶</a></li>
                <li><a href="#">美瞳</a></li>
                <li><a href="#">镜片护理</a></li>
                <li><a href="#">眼镜学堂</a></li>
                <li><a href="#">金币商城</a></li>
            </ul>
        </div> 
    </div>
    <div id="main">
        <div class="margin">
            <div class="main1">
                    <div class="main-l">
                        <ul class="all">
                            <li>
                                <i class="i1"></i>
                                <div class="bao">
                                    <a href="#" style="color: rgb(51, 51, 51);">隐形眼镜</a><br>
                                    <a href="#" class="mm" style="color: rgb(51, 51, 51);">博士伦</a>
                                    <a href="#" class="mm" style="color: rgb(51, 51, 51);">库伯</a>
                                    <a href="#" class="mm" style="color: rgb(51, 51, 51);">硅水凝胶</a>
                                </div>
                            </li>
                            <div class="allmore" style="display: none; box-shadow: rgb(153, 153, 153) 1px 1px 10px;"></div>
                            <li>
                                <i class="i2"></i>
                                <div class="bao">
                                    <a href="#" style="color: rgb(51, 51, 51);">彩色隐形眼镜</a><br>
                                    <a href="#" class="mm" style="color: rgb(51, 51, 51);">强生美瞳</a>
                                    <a href="#" class="mm" style="color: rgb(51, 51, 51);">博士伦</a>
                                    <a href="#" class="mm" style="color: rgb(51, 51, 51);">实瞳</a>
                                </div>
                            </li>
                            <li>
                                <i class="i3"></i>
                                <div class="bao">
                                    <a href="#" style="color: rgb(51, 51, 51);">护理用品</a><br>
                                    <a href="#" class="mm" style="color: rgb(51, 51, 51);">护理液</a>
                                    <a href="#" class="mm" style="color: rgb(51, 51, 51);">润眼液</a>
                                    <a href="#" class="mm" style="color: rgb(51, 51, 51);">硬镜护理</a>
                                </div>
                            </li>
                            <li>
                                <i class="i4"></i>
                                <div class="bao">
                                    <a href="#" style="color: rgb(51, 51, 51);">太阳眼镜</a><br>
                                    <a href="#" class="mm" style="color: rgb(51, 51, 51);">雷朋</a>
                                    <a href="#" class="mm" style="color: rgb(51, 51, 51);">多米那</a>
                                    <a href="#" class="mm" style="color: rgb(51, 51, 51);">隐形眼镜</a>
                                </div>
                            </li>
                            <li>
                                <i class="i5"></i>
                                <div class="bao">
                                    <a href="#" style="color: rgb(51, 51, 51);">功能眼镜</a><br>
                                    <a href="#" class="mm" style="color: rgb(51, 51, 51);">游泳镜</a>
                                    <a href="#" class="mm" style="color: rgb(51, 51, 51);">篮球眼镜</a>
                                    <a href="#" class="mm" style="color: rgb(51, 51, 51);">老花镜</a>
                                </div>
                            </li>
                        </ul>
                    </div>   
            </div>
            <div class="left_extra">
                <div id="yx_list">
                    <div class="mc">
                        <div class="title bg_huise">系列</div>
                        <ul class="item">
                            <li><a href="##">透明隐形 | 清朗系列</a></li>
                            <li><a href="##">透明隐形 | 硅水凝胶</a></li>
                            <li><a href="##">透明隐形 | Air 超薄</a></li>
                            <li><a href="##">彩色隐形 | 蕾丝炫眸</a></li>
                            <li><a href="##">彩色隐形 | 蕾丝明眸</a></li>
                            <li><a href="##">护理液 | 博乐纯</a></li>
                            <li><a href="##">护理液 | 润明清透</a></li>
                            <li><a href="##">护理液 | 润明除蛋白</a></li>
                            <li><a href="##">润眼液 | 润明新概念</a></li>
                            <li><a href="##">透明隐形 | 散光型</a></li>
                            <li><a href="##">【彩片】明透亮眸</a></li>
                            <li><a href="##">【彩片】星悦逸彩</a></li>
                            <li><a href="##">【彩片】欣莹炫彩</a></li>
                            <li><a href="##">【彩片】超逸睛彩</a></li>
                            <li><a href="##">【彩片】水灵焕彩</a></li>
                            <li><a href="##">【彩片】莹翠亮眸</a></li>
                        </ul>
                    </div>
                </div>
                <div id="ctl00_Main_DivRecentcomment" class="divcomment">
                    <div class="mc">
                        <div class="title bg_huise">
                        最新评论
                        </div>
                        <ul class="item">
                            <li>
                                <div class="itm_img">
                                    <a target="_blank" href="https://www.vsigo.cn/item2354.html" class="blue">
                                        <img src="https://images.vsigo.cn/Products/contacts/60-60/2017122001345592.png">
                                    </a>
                                </div>
                                <div class="itm_name">
                                    <a target="_blank" href="https://www.vsigo.cn/item2354.html" class="blue" title="博士伦清朗一日水润高清日抛隐形眼镜30片装">博士伦清朗一日水润高清日抛隐形眼镜30片装
                                    </a>
                                </div>
                                <div class="comm_user">
                                ***6046***
                                </div>
                                <div class="comm_date">2019-06-06</div>
                                <div class="comm_txt"><span>发货很快</span>质高价廉物美</div>
                            </li>
                            <li>
                                <div class="itm_img">
                                    <a target="_blank" href="https://www.vsigo.cn/item2354.html" class="blue">
                                        <img src="https://images.vsigo.cn/Products/caresolution/60-60/20178131837210811.jpg">
                                    </a>
                                </div>
                                <div class="itm_name">
                                    <a target="_blank" href="https://www.vsigo.cn/item2354.html" class="blue" title="博士伦清朗一日水润高清日抛隐形眼镜30片装">博士伦清朗一日水润高清日抛隐形眼镜30片装
                                    </a>
                                </div>
                                <div class="comm_user">
                                ***6046***
                                </div>
                                <div class="comm_date">2019-06-06</div>
                                <div class="comm_txt"><span>发货很快</span>质高价廉物美</div>
                            </li>
                            <li>
                                <div class="itm_img">
                                    <a target="_blank" href="https://www.vsigo.cn/item2354.html" class="blue">
                                        <img src="https://images.vsigo.cn/Products/contacts/60-60/201872717414080170.jpg">
                                    </a>
                                </div>
                                <div class="itm_name">
                                    <a target="_blank" href="https://www.vsigo.cn/item2354.html" class="blue" title="博士伦清朗一日水润高清日抛隐形眼镜30片装">博士伦清朗一日水润高清日抛隐形眼镜30片装
                                    </a>
                                </div>
                                <div class="comm_user">
                                ***6046***
                                </div>
                                <div class="comm_date">2019-06-06</div>
                                <div class="comm_txt"><span>发货很快</span>质高价廉物美</div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="right_extra">
                <div id="ctl00_Main_divSearchSelect" class="search_select">
                    <dl>
                        <dt>类别</dt>
                        <dd>
                            <div>
                                <a>隐形眼镜（32）</a>
                            </div>
                            <div><a >护理液（15）</a>
                            </div>
                            <div>
                                <a >其它产品（1）</a>
                            </div>
                            <div>
                                <a>润眼液（1）</a>
                            </div>
                        </dd>
                    </dl>
                    <dl>
                        <dt>周期</dt>
                        <dd>
                            <div>
                                <a >半年抛（10）</a>
                            </div>
                            <div>
                                <a >年抛（8）</a>
                            </div>
                            <div>
                                <a>日抛（7）</a>
                            </div>
                            <div>
                                <a>月抛（5）</a>
                            </div>
                            <div>
                                <a >双周抛（1）</a>
                            </div>
                            <div>
                                <a >季抛（1）</a>
                            </div>
                        </dd>
                    </dl>
                    <dl>
                        <dt>是否美瞳</dt>
                        <dd>
                            <div>
                                <a >透明（10）</a>
                            </div>
                            <div>
                                <a >美瞳（8）</a>
                            </div>
                        </dd>
                    </dl>
                    <dl>
                        <dt>价格</dt>
                        <dd>
                            <div>
                                <a >0.0-50（10）</a>
                            </div>
                            <div>
                                <a >50-100（8）</a>
                            </div>
                            <div>
                                <a>100-150（7）</a>
                            </div>
                            <div>
                                <a>150-200（5）</a>
                            </div>
                            <div>
                                <a >150*2（1）</a>
                            </div>
                        </dd>
                    </dl>
                    <dl>
                        <dt>含水量</dt>
                        <dd>
                            <div>
                                <a >0.0-40（10）</a>
                            </div>
                            <div>
                                <a >41-44（8）</a>
                            </div>
                            <div>
                                <a>45*（7）</a>
                            </div>
                        </dd>
                    </dl>
                    <dl >
                        <dt>基弧</dt>
                        <dd>
                            <div>
                                <a >0.0-50（10）</a>
                            </div>
                            <div>
                                <a >50-100（8）</a>
                            </div>
                            <div>
                                <a>100-150（7）</a>
                            </div>
                            <div>
                                <a>150-200（5）</a>
                            </div>
                            <div>
                                <a >150*2（1）</a>
                            </div>
                        </dd>
                    </dl>
                    <dl>
                        <dt>中心厚度</dt>
                        <dd>
                            <div>
                                <a >0.0-50（10）</a>
                            </div>
                            <div>
                                <a >50-100（8）</a>
                            </div>
                            <div>
                                <a>100-150（7）</a>
                            </div>
                            <div>
                                <a>150-200（5）</a>
                            </div>
                            <div>
                                <a >150*2（1）</a>
                            </div>
                        </dd>
                    </dl>
                    <dl>
                        <dt>容量</dt>
                        <dd>
                            <div>
                                <a >0.0-50（10）</a>
                            </div>
                            <div>
                                <a >50-100（8）</a>
                            </div>
                            <div>
                                <a>100-150（7）</a>
                            </div>
                            <div>
                                <a>150-200（5）</a>
                            </div>
                            <div>
                                <a >150*2（1）</a>
                            </div>
                        </dd>
                    </dl>
                </div>
                <div class="search_lst">
                    <ul id="ctl00_Main_searchListUL">
                        <!-- 读取数据 -->
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div id="footer">
        <div class="margin">
            <div class="footer-t">
                <a href="##" style="color: #737373; font-family: Microsoft YaHei">
                opyright ©2019 南京视客网络科技有限公司 版权所有. 法律顾问：秦在丛（执业编号：13201200411564699） 
                </a>
                <div>
                    <a href="##">苏ICP备12054666号</a>
                    <a href="##">ICP经营许可证：苏B2-20170205</a>
                    <a href="##"> 医疗器械经营许可证：苏宁食药监械经营许20170464号</a>
                    <a href="##">互联网药品信息服务资格证书编号：(苏)-经营性-2017-0005</a>
                    <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=32010402000492">
                    <img src="https://images.vsigo.cn/zhuanti/playcolor2018_04/police.png" style="margin-right:5px;position:relative;top:5px;">苏公网安备 32010402000492号</a>
                    
                </div>
            </div>
            <div class="footer-b">
                <ul>
                    <li><a href="##" class="zhs_pic dsxh1"></a></li>
                    <li><a href="##" class="zhs_pic dsxh2"></a></li>
                    <li><a href="##" class="zhs_pic dsxh3"></a></li>
                    <li><a href="##" class="zhs_pic dsxh4"></a></li>
                    <li><a href="##" class="zhs_pic dsxh5"></a></li>
                    <li><a href="##" class="zhs_pic dsxh6"></a></li>
                    <li><a href="##" class="zhs_pic dsxh7"></a></li>
                </ul>
            </div>
        </div>
    </div>
    <div id="link_right">
        <div class="link_main">
            <div class="link_main_top">
                <a href="##"><img src="img/r1jpg.jpg" alt=""></a>
            </div>
            <div class="link_main_middle">
                <ul>
                    <li>
                        <a href="##" style="height: 41px"><i class="icon icon1"></i></a>
                    </li>
                    <li>
                        <a href="##" style="height: 60px;margin-left: 7px;font-size: 14px;">购物车<i class="icon icon2 icar"></i></a>
                    </li>
                    <li>
                        <a href="##" style="height: 60px;margin-left: 5px;font-size: 12px;margin-top: 22px;">会员中心<i class="icon icon3"></i></a>
                    </li>
                    <li>
                        <a href="##" style="height: 60px;margin-left: 5px;font-size: 12px;margin-top: 22px">在线客服<i class="icon icon4"></i></a>
                    </li>
                    <li>
                        <a href="##"><i class="icon icon5"></i></a>
                    </li>
                    <li>
                        <a href="##"><i class="icon icon6"></i></a>
                    </li>
                </ul>
            </div>
            <div class="link_main_bottom"></div>
        </div>
    </div>
</body>
<script src="js/jquery.2.2.4.js"></script>
<script src="js/ajax.2.0.js"></script>
<script src="js/cookie.js"></script>
<script>
    class List{
        constructor(){
            this.cont = document.getElementById("ctl00_Main_searchListUL");
            // this.cont = document.querySelector(".Npro_price")
            this.url = "http://localhost/xiangmu/data/goodsnew.json";
            this.init();
            this.addEvent()
        }
        init(){
            var that = this;
            ajax({
                url:this.url,
                success:function(res){
                    that.res = JSON.parse(res)
                    console.log(res)
                    that.display()
                }
            })
        }
        display(){
            var str = "";
            for (var i=0;i<this.res.length;i++) {
                str +=`
                        <li index = "${this.res[i].goodsId}">
                            <div class="Npro_img">
                                <a href="" target="_blank">
                                    <img src="${this.res[i].src}" alt="${this.res[i].name}">
                                </a>
                            </div>
                            <div class="Npro_title goodsTitleWrap clearindex">
                                <a href="" title="">
                                    <b class="titleBar">${this.res[i].name}</b>
                                </a>
                            </div>
                            <div class="Npro_price">
                                <span class="sigoprice">￥${this.res[i].price}</span>
                                <span class="btn">加入购物车</span>
                            </div>
                        </li>
                        `       
            }
            this.cont.innerHTML = str;
        }
        addEvent(){
            var that = this;
            this.cont.addEventListener("click",function(eve){
                var e = eve || window.event;
                var target = e.target || e.srcElement;
                if (target.className == "btn") {
                    //点击时保存当前商品id
                    that.id = target.parentNode.parentNode.getAttribute("index");
                    console.log(target)
                    //准备设置cookie
                    that.setCookie()
                }
            })
        }
        setCookie(){
            this.goods = getCookie("shangpin");

            if(this.goods){
                this.goods = JSON.parse(this.goods)
                var onoff = true;
                for(var i=0;i<this.goods.length;i++){
                    if(this.goods[i].id == this.id){
                        // 是重复数据
                        this.goods[i].num ++;
                        onoff = false;
                    }
                }
                // 点的是新数据
                if(onoff){
                    this.goods.push({
                        id:this.id,
                        num:1
                    })
                }
            }else{
                // 第一次点击，直接存
                this.goods = [{
                    id:this.id,
                    num:1
                }]
            }
            // 8.以上都只是在操作数组，最后要设置回cookie
            setCookie("shangpin",JSON.stringify(this.goods))
        }
    
    }
    new List();
</script>
</html>